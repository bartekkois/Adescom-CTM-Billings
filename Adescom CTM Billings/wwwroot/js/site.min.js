var BillingsService=function(){"use strict";var n=function(n,t,i,r,u){var f=new XMLHttpRequest;f.open("POST","/?handler=export",!0);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.responseType="blob";f.onload=function(){this.status==200?r(f):u(f)};f.send("StartDate="+n+"&EndDate="+t+"&__RequestVerificationToken="+i)};return{getBillings:n}}(),BillingsController=function(){"use strict";var r=$("#start-date-input"),u=$("#end-date-input"),f=$("#request-verification-token"),i=$("#get-billings-status"),n=$("#get-billings-button-icon"),t=$("#get-billings-button"),e=function(){t.click(o)},o=function(){t.attr("disabled",!0);n.removeClass("glyphicon-download-alt");n.addClass("glyphicon-cog gly-spin");i.text("pobieranie billingów");BillingsService.getBillings(r.val(),u.val(),f.val(),s,h)},s=function(r){var f=r.getResponseHeader("Content-Disposition"),e=f.split(";"),u=e[1].split("=")[1],o=u.substring(1,u.length-1),s=new Blob([r.response],{type:"application/zip"});saveAs(s,o);t.attr("disabled",!1);n.removeClass("glyphicon-cog gly-spin");n.addClass("glyphicon-download-alt");i.text("zakończono pobieranie")},h=function(){t.attr("disabled",!1);n.removeClass("glyphicon-cog gly-spin");n.addClass("glyphicon-download-alt");i.text("wystąpił błąd")};return{init:e}}(BillingsService);